<div class="peek-nav-section">
    <div class="btn-group pull-left"
         role="group">
        <button class="nav-section-btn"
                role="group"
                (click)="navToChatsClicked()">
            <fa name="angle-left"></fa>
        </button>
    </div>
</div>

<div class="plugin-chat-messages"
     #messageListRef>
    <!-- No Messages -->
    <div class="h3"
         *ngIf="!haveMessages()">
        No messages

    </div>
    <div class="chat-messages-list">

        <div *ngFor="let i=index; let msg of messages()">
            <!-- Unread marker -->
            <hr *ngIf="isFirstUnreadMesage(i)"/>

            <!-- From and Date -->
            <div [class.chat-messages-sent]="isMessageFromThisUser(msg)"
                 [class.chat-messages-received]="!isMessageFromThisUser(msg)">
                <div class="chat-messages-details"
                     *ngIf="!isMessageFromThisUser(msg)">
                    From {{userDisplayName(msg)}} ({{msg.fromUserId}}), {{timePast(msg)}}
                    ago

                </div>
                <div class="chat-messages-details"
                     *ngIf="isMessageFromThisUser(msg)">
                    {{timePast(msg)}} ago

                </div>
                <div [class.chat-messages-sent]="isMessageFromThisUser(msg)"
                     [class.chat-messages-received]="!isMessageFromThisUser(msg)"
                     [class.bg-success]="isNormalPriority(msg)"
                     [class.bg-danger]="isEmergencyPriority(msg)">

                    <div class="chat-messages-normal"
                         *ngIf="isNormalPriority(msg)">
                        {{msg.message}}

                    </div>
                    <div class="chat-messages-emergency"
                         *ngIf="isEmergencyPriority(msg)">
                        {{msg.message}}

                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="chat-messages-compose">
    <textarea class="form-control chat-messages-new-text"
              [(ngModel)]="newMessageText">

    </textarea>
        <button class="btn chat-messages-btn" type="button"
                [disabled]="!sendEnabled()"
                (click)="sendMsgClicked()">
            Send

        </button>
        <button class="btn chat-messages-btn" type="button"
                (click)="sendSosClicked()">
            SOS

        </button>
    </div>
</div>